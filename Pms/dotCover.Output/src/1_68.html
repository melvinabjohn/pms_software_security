<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>/Users/melvinabraham/Desktop/Melvin/Hochschule/pms/Pms/pms-testProject/TestPMSController.cs</title>
    <script type="text/javascript" src="../js/dotcover.sourceview.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/dotcover.report.css" />
  </head>
  <body>
    <pre id="content" class="source-code">
using Microsoft.AspNetCore.Mvc;
using Test1.Controllers;
using static pms_testProject.MockData.DataFixture&lt;Moq.Mock&gt;;
using System.Net;
using Assert = Xunit.Assert;
using pms_testProject.MockData;
using Test1.Models;

namespace pms.Tests;

//[TestClass]
public class TestPMSController : IClassFixture&lt;PMSServiceDataFixture&gt;, IClassFixture&lt;LoggerDataFixture&gt;
{

    private readonly PMSController _controller;
    

    public TestPMSController(LoggerDataFixture logger, PMSServiceDataFixture PmsService)
    {
        _controller = new PMSController(logger.LogManagerMock.Object, PmsService.ServiceFacade.Object);
    }

    [Fact]
    public async void GetPolicy_ShouldReturn200()
    {
        //var mockRepo = new Mock&lt;IPMSService&gt;();
        var result = await _controller.GetPolicy() as OkObjectResult;
        
        Assert.True(result.StatusCode == (int)HttpStatusCode.OK);
    }

    [Fact]
    public async void UpdatePolicy_ShouldReturn200()
    {
        //PolicyUpdate_Success
        //var mockRepo = new Mock&lt;IPMSService&gt;();
        //Policy request = MockDataReader.GetStubData&lt;Policy&gt;(&quot;PolicyUpdate_Success&quot;);

        Policy pol = new()
        {
            PolicyId = 1,
            PolicyName = &quot;asd&quot;,
            PolicyCreatedDate = DateTime.Now,
            DigitsRequired = 2,
            UppercasesRequired = 2,
            LowercasesRequired =2,
            NonAlphanumericsRequired =2,
            RequiredLength=8,
            LoginToken =&quot;qwe&quot;,
            AdminId = 1
        };
        var result = await _controller.UpdatePolicy(pol) as OkObjectResult;

        Assert.True(result.StatusCode == (int)HttpStatusCode.OK);
    }

    ///Commenting the delete policy test because it will delete the existing policy and will reslut in failure of another test case
    ///
    //[Fact]
    //public async void DeletePolicy_ShouldReturn200()
    //{
    //    //var mockRepo = new Mock&lt;IPMSService&gt;();
    //    var result = await _controller.DeletePolicy() as OkObjectResult;

    //    Assert.True(result.StatusCode == (int)HttpStatusCode.OK);
    //}

    [Fact]
    public async void UpdateUserStatus_ShouldReturn200()
    {
        UpdateUserStatusRequest request = MockDataReader.GetStubData&lt;UpdateUserStatusRequest&gt;(&quot;UpdateUserStatusRequest_Success&quot;);

        var result = await _controller.UpdateUserStatus(request) as OkObjectResult;

        Assert.True(result.StatusCode == (int)HttpStatusCode.OK);
    }

    [Fact]
    public async void RequestAccess_ShouldReturn200()
    {
        AccessRequest request = MockDataReader.GetStubData&lt;AccessRequest&gt;(&quot;AccessRequest_Success&quot;);

        var result = await _controller.RequestAccess(request) as OkObjectResult;

        Assert.True(result.StatusCode == (int)HttpStatusCode.OK);
    }

    [Fact]
    public async void GetLegacyAppPasswordsReturn200()
    {
        var result = await _controller.GetLegacyAppPasswords(1) as OkObjectResult;

        Assert.True(result.StatusCode == (int)HttpStatusCode.OK);
    }

    [Fact]
    public async void UpdatePasswordReturn200()
    {
        PasswordUpdateRequest request = MockDataReader.GetStubData&lt;PasswordUpdateRequest&gt;(&quot;PasswordUpdateRequest_Success&quot;);
        var result = await _controller.UpdatePassword(request) as OkObjectResult;

        Assert.True(result.StatusCode == (int)HttpStatusCode.OK);
    }

    [Fact]
    public async void BulkGeneratePasswordReturn200()
    {
        var result = await _controller.BulkGeneratePassword(5) as OkObjectResult;

        Assert.True(result.StatusCode == (int)HttpStatusCode.OK);
    }

    [Fact]
    public async void UpdatePasswordsReturn200()
    {
        var result = await _controller.UpdatePasswords() as OkObjectResult;

        Assert.True(result.StatusCode == (int)HttpStatusCode.OK);
    }

    [Fact]
    public async void DisableUsersReturn200()
    {
        var result = await _controller.DisableUsers() as OkObjectResult;

        Assert.True(result.StatusCode == (int)HttpStatusCode.OK);
    }

    [Fact]
    public async void LoginReturn200()
    {
        LoginRequest request = MockDataReader.GetStubData&lt;LoginRequest&gt;(&quot;LoginRequest_Success&quot;);

        var result = await _controller.Login(request) as OkObjectResult;

        Assert.True(result.StatusCode == (int)HttpStatusCode.OK);
    }


}

    </pre>
    <script type="text/javascript">
      highlightRanges([[18,5,18,89,1],[19,5,19,6,1],[20,9,20,104,1],[21,5,21,6,1],[25,5,25,6,1],[27,9,27,70,1],[29,9,29,66,1],[30,5,30,6,1],[34,5,34,6,1],[39,9,51,11,1],[52,9,52,76,1],[54,9,54,66,1],[55,5,55,6,1],[70,5,70,6,1],[71,9,71,130,1],[73,9,73,84,1],[75,9,75,66,1],[76,5,76,6,1],[80,5,80,6,1],[81,9,81,100,1],[83,9,83,81,1],[85,9,85,66,1],[86,5,86,6,1],[90,5,90,6,1],[91,9,91,83,1],[93,9,93,66,1],[94,5,94,6,1],[98,5,98,6,1],[99,9,99,124,1],[100,9,100,82,1],[102,9,102,66,1],[103,5,103,6,1],[107,5,107,6,1],[108,9,108,82,1],[110,9,110,66,1],[111,5,111,6,1],[115,5,115,6,1],[116,9,116,76,1],[118,9,118,66,1],[119,5,119,6,1],[123,5,123,6,1],[124,9,124,73,1],[126,9,126,66,1],[127,5,127,6,1],[131,5,131,6,1],[132,9,132,97,1],[134,9,134,73,1],[136,9,136,66,1],[137,5,137,6,1]]);
    </script>
  </body>
</html>